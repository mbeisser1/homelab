# postgresql.conf for XWiki (single-user NAS tuning)
listen_addresses = '*'

# Connections
max_connections = 50   # plenty for one person + background jobs

# Memory
shared_buffers = 1GB              # enough cache without starving other services
work_mem = 32MB                   # per sort/join, safe for single-user
effective_cache_size = 4GB        # planner assumes kernel can cache ~4GB
maintenance_work_mem = 256MB      # for vacuum/alter
wal_buffers = -1                  # let Postgres auto-size (~16MB)

# Planner & statistics
default_statistics_target = 200   # better query planning

# Checkpoints
checkpoint_completion_target = 0.9
max_wal_size = 1GB
min_wal_size = 80MB

# Logging
log_min_duration_statement = 3000 # log queries slower than 3s
